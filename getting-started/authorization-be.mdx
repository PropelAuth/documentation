---
title: "Backend Authorization"
---

In our guide on [Protecting Backend APIs](/getting-started/quickstart-be), we saw how to set up a `/whoami` route only accessible from logged-in users.

Now, we're going to create a route that is scoped to an organization and can only be called by users with an Admin role in the specified organization.

## Passing in an orgId in the URL

The API route we're going to create is:

```text
GET /org/:orgId/is-admin
```

This means that when the frontend makes a request, we expect it to tell us which organization is currently active.

<br/>
<br/>
<Tabs>
  <Tab title="Express">
    In the Protecting Backend APIs guide, we created this route, protected by `requireUser`:

    ```js
    const { requireUser } = require("./propelauth");

    // requireUser is a middleware which validates the access token
    app.get("/whoami", requireUser, (req, res) => {
      res.text("Hello user with ID " + req.user.userId);
    });
    ```

    To create our new API, we can use the [requireOrgMemberWithExactRole](/reference/backend-apis/express#requireorgmember) function:

    ```js
    // The extractor tells the library how to find the orgId
    const orgIdInPathExtractor = (req) => req.params.orgId;
    const requireAdminInOrg = requireOrgMemberWithExactRole({
      role: "Admin",
      orgIdExtractor: orgIdInQueryExtractor,
    })

    app.get("/org/:orgId/is-admin", requireAdminInOrg, (req, res) => {
      console.log("req.user AND req.org are set", req.user, req.org)
      res.text("Yes, you are an admin");
    });
    ```

    This middleware does a few things:
     - Makes sure the user is valid, and sets `req.user` if so.
     - Makes sure the user is in the specified organization, and sets `req.org` if so.
     - Makes sure the user is an `Admin` within that organization.

    ## Other authorization functions

    You can also call:
    - `requireOrgMember` - to just check that the user is in the extracted organization
    - `requireOrgMemberWithMinimumRole` - checks `requireOrgMember` AND that the users role is at least the provided `minimumRequiredRole`
    - `requireOrgMemberWithPermission` - checks `requireOrgMember` AND that the user has the provided `permission`
    - `requireOrgMemberWithAllPermissions` - checks `requireOrgMember` AND that the user has all the provided `permissions`

  </Tab>
  <Tab title="Node">
    â˜ï¸ Welcome to the content that you can only see inside the first Tab.
  </Tab>
  <Tab title="Flask">
    ğŸ’ª Here's content that's only inside the third Tab.
  </Tab>
  <Tab title="FastAPI">
    ğŸ’ª Here's content that's only inside the third Tab.
  </Tab>
  <Tab title="Django">
    ğŸ’ª Here's content that's only inside the third Tab.
  </Tab>
  <Tab title="Python">
    ğŸ’ª Here's content that's only inside the third Tab.
  </Tab>
  <Tab title="Axum">
    ğŸ’ª Here's content that's only inside the third Tab.
  </Tab>
  <Tab title="Actix">
    ğŸ’ª Here's content that's only inside the third Tab.
  </Tab>
  <Tab title="Rust">
    ğŸ’ª Here's content that's only inside the third Tab.
  </Tab>
</Tabs>

## A Note on Latency

Checking authorization information can be done with no external requests, as the tokens themselves contain authorization information.
This means that checking the organization, role, and/or permissions adds virtually no latency to your requests.